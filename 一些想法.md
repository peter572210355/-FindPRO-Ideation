### 2.10 一些想法（後面階段的）
- 確定seek版固定題目下稍微更改題目對於結果是否有顯著影響
- 因委員只能選五個人，是否本演算法所推薦得其實較佳
- 題目名字太過普遍是否影響結果
- 在測試資料中，能否有辦法事先標記額外委員也是合適的，以讓本演算法更準確
- 人工排查已確定委員是否真的重要和確定退件名單前幾名是極合適的
- 依照推薦分數區間分成群體
- 藉由使用者標記行為，來更新排名

## 人機互動對於已知審查委員之專家標記專業版
# Part B：已知審查委員題目評估流程

本部分說明如何利用「已知審查委員」的題目，檢驗系統在既有案例上的表現。  
流程分為：資料準備 → 專家標註 → 一致性檢定 → 系統 vs 專家比較 → 錯誤診斷與回饋。

---

## Step 1. 資料準備
- 每題 $q$ 有候選委員集合，系統給出完整排名 $r_{qi}$（1 = 最前）。  
- 總候選人數 $N_q$。  
- 定義已知委員集合 $G_q$（這些是我們特別關注的人）。  

---

## Step 2. 專家評級 (Expert Annotation)
- **Top-k 名單**（例：前 15）：全部給專家評級  
  $g_{qi}\in\{1,2,3,4\}$ （1 = 不重要，4 = 高度相關）。  
- **已知委員**：無論是否在 Top-k，都要額外給專家評級。  
- **其他 k 外樣本**：不評級（標為 NA）。  

👉 這樣可確保「Top-k 的排序品質」與「已知委員是否被漏排」都能被檢查。  

---

## Step 3. 專家一致性檢定
確認多位專家是否對同一候選人評分一致。  

- **Fleiss’ κ（加權 κ）**：多專家類別一致性。  
- **Krippendorff’s α（ordinal α）**：最推薦，可處理 ordinal 尺度與缺值。  
- **Kendall’s W**：若專家提供排名。  

路線決策：  
- 一致性高 → 合成共識標籤（平均 / 中位 / 加權）。  
- 一致性低 → 保留逐專家標註，逐專家 vs 系統比較（Wilcoxon 彙總）。  

---

## Step 4. 系統 vs 專家比較

### (A) 整體一致性（主要目標）
檢查系統排序是否與專家評級整體一致。  

- **秩相關**  
  - Kendall’s $\tau_b$  
  - Somers’ $D$  

- **排序品質指標（IR 指標）**  
  - NDCG@K（僅 Top-k）  
  - **Pooled-NDCG**（Top-k + 已知委員）：

    ${pDCG}_(q)=sum_{i in L_q}\frac{G(g_{qi})}{log_2(r_{qi}+1)}$
    

    ${iDCG}_(q)=sum_{j=1}^{|L_q|}\frac{G\big(g_{q(j)}^{\downarrow}\big)}{log_2(j+1)}$  

    ${pNDCG}(q)=\frac{{pDCG}(q)}{{iDCG}(q)}$  

  - Precision@K / Recall@K  
  - MAP / MRR  

- **統計檢定**  
  - Permutation Test：檢查系統是否顯著優於隨機。  
  - Bootstrap CI（by query）：估計 $\tau_b$、NDCG 的區間。  

---

### (B) 已知委員補充診斷（次要，但關鍵）
專門針對 $G_q$ 做診斷分析。  

- **Coverage@K**  
  ${Coverage@}K(q)=\frac{|G_q\cap {TopK}_q|}{|G_q|}$  

- **HighRel-in-K**  
  已知委員進到 Top-k 中，多少被專家標為「重要以上」（$g\ge 3$）。  

- **Missed-Known@K**  
  已知委員在 k 外，但專家評高分 → 系統漏排。  

- **Rank-Gap / Percentile**  
  ${Gap}_{qi} = r_{qi}-K,\quad \text{Pct}_{qi} = 1-\frac{r_{qi}-1}{N_q}$  

- **Exposure-Weighted Recall (EWR)**  

  ${EWR}_(q)=\frac{\sum_{i\in L_q^{+}} {disc}(r_{qi})}{\sum_{j=1}^{|L_q^{+}|} {disc}(j)},\quad {disc}(r)=\frac{1}{\log_2(r+1)}$

---

## Step 5. 錯誤清單與改進建議
- **Missed-Known@K**：$g_{qi}\ge t,\ r_{qi}>K$（列名次、百分位、專家分數）。  
- **Low-Rated-in-K**：$r_{qi}\le K,\ g_{qi}\le 2$。  
- **Rank-Gap 分桶**：依差距分為輕 / 中 / 重，排定優先修正順序。  

利用這些清單分析特徵缺陷，調整系統排序權重或訓練 re-ranking 模型。  

---

## Step 6. 評估與迭代
- 整體上看 $\tau_b$、Pooled-NDCG、EWR 的平均與信賴區間。  
- 檢查錯誤清單是否縮小（Coverage 提升、漏排減少、平均 Gap 降低）。  
- 長期蒐集更多案例 → 迭代更新系統。

